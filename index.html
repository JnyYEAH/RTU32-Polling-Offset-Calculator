<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNP3 Offset Calculator</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        function Calculator({ className, ...props }) {
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    <rect width="16" height="20" x="4" y="2" rx="2"/>
                    <line x1="8" x2="16" y1="6" y2="6"/>
                    <line x1="16" x2="16" y1="14" y2="14"/>
                    <path d="M16 10h.01"/>
                    <path d="M12 10h.01"/>
                    <path d="M8 10h.01"/>
                    <path d="M12 14h.01"/>
                    <path d="M8 14h.01"/>
                    <path d="M12 18h.01"/>
                    <path d="M8 18h.01"/>
                </svg>
            );
        }

        function DNP3Calculator() {
            const [dnp3Address, setDnp3Address] = useState('');
            const [dnp3Set, setDnp3Set] = useState('');
            const [results, setResults] = useState(null);

            const calculateOffsets = () => {
                if (!dnp3Address || !dnp3Set) {
                    setResults(null);
                    return;
                }

                if (!/^\d{5}$/.test(dnp3Address)) {
                    setResults(null);
                    return;
                }

                if (!/^\d{2,3}$/.test(dnp3Set)) {
                    setResults(null);
                    return;
                }

                const address = parseInt(dnp3Address);
                const set = parseInt(dnp3Set);

                const integrityMinutes = address % 1440;
                const hours = Math.floor(integrityMinutes / 60);
                const minutes = integrityMinutes % 60;
                const integrityFormatted = `${hours}H${minutes}M`;

                const lastTwoDigitsAddress = parseInt(dnp3Address.slice(-2));
                const offsetMinutes = lastTwoDigitsAddress % 15;

                const lastTwoDigitsSet = parseInt(dnp3Set.slice(-2));
                const offsetSeconds = (lastTwoDigitsSet % 55) + 5;

                const combinedOffset = `${offsetMinutes}M${offsetSeconds}S`;

                setResults({
                    integrityFormatted,
                    integrityMinutes,
                    offsetMinutes,
                    offsetSeconds,
                    combinedOffset
                });
            };

            const handleAddressChange = (e) => {
                const value = e.target.value.replace(/\D/g, '').slice(0, 5);
                setDnp3Address(value);
                setTimeout(() => {
                    if (value && dnp3Set) {
                        calculateOffsets();
                    }
                }, 0);
            };

            const handleSetChange = (e) => {
                const value = e.target.value.replace(/\D/g, '').slice(0, 3);
                setDnp3Set(value);
                setTimeout(() => {
                    if (dnp3Address && value) {
                        calculateOffsets();
                    }
                }, 0);
            };

            useEffect(() => {
                calculateOffsets();
            }, [dnp3Address, dnp3Set]);

            const isValidAddress = dnp3Address.length === 5;
            const isValidSet = dnp3Set.length >= 2 && dnp3Set.length <= 3;

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-100 p-8">
                    <div className="max-w-3xl mx-auto">
                        <div className="bg-white rounded-lg shadow-lg p-8">
                            <div className="flex items-center gap-3 mb-6">
                                <Calculator className="w-8 h-8 text-purple-600" />
                                <h1 className="text-3xl font-bold text-gray-800">DNP3 Offset Calculator</h1>
                            </div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        DNP3 Address <span className="text-gray-500">(5 digits)</span>
                                    </label>
                                    <input
                                        type="text"
                                        value={dnp3Address}
                                        onChange={handleAddressChange}
                                        placeholder="12345"
                                        maxLength={5}
                                        className={`w-full px-4 py-3 border-2 rounded-lg focus:outline-none text-lg ${
                                            dnp3Address && !isValidAddress
                                                ? 'border-red-300 focus:border-red-500'
                                                : 'border-gray-300 focus:border-purple-500'
                                        }`}
                                    />
                                    {dnp3Address && !isValidAddress && (
                                        <p className="text-red-500 text-xs mt-1">Must be exactly 5 digits</p>
                                    )}
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        DNP3 Set <span className="text-gray-500">(eg. 041)</span>
                                    </label>
                                    <input
                                        type="text"
                                        value={dnp3Set}
                                        onChange={handleSetChange}
                                        placeholder="123"
                                        maxLength={3}
                                        className={`w-full px-4 py-3 border-2 rounded-lg focus:outline-none text-lg ${
                                            dnp3Set && !isValidSet
                                                ? 'border-red-300 focus:border-red-500'
                                                : 'border-gray-300 focus:border-purple-500'
                                        }`}
                                    />
                                    {dnp3Set && !isValidSet && (
                                        <p className="text-red-500 text-xs mt-1">Must be 2 or 3 digits</p>
                                    )}
                                </div>
                            </div>

                            {results && isValidAddress && isValidSet && (
                                <div className="space-y-4">
                                    <div className="bg-purple-50 border-2 border-purple-200 rounded-lg p-6">
                                        <h2 className="text-lg font-semibold text-purple-900 mb-2">
                                            DNP3 Integrity Polling Interval Day Plus
                                        </h2>
                                        <div className="flex items-baseline gap-2">
                                            <span className="text-4xl font-bold text-purple-600">
                                                {results.integrityFormatted}
                                            </span>
                                        </div>
                                        <p className="text-sm text-gray-600 mt-2">
                                            Formula: DNP3 Address mod 1440 = {results.integrityMinutes} minutes
                                        </p>
                                    </div>

                                    <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-6">
                                        <h2 className="text-lg font-semibold text-blue-900 mb-2">
                                            WITS Logged Data Polling Offset
                                        </h2>
                                        <div className="flex items-baseline gap-2 mb-4">
                                            <span className="text-4xl font-bold text-blue-600">
                                                {results.combinedOffset}
                                            </span>
                                        </div>
                                        
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                            <div className="bg-white rounded p-3">
                                                <p className="font-medium text-gray-700">Period Minutes</p>
                                                <p className="text-2xl font-bold text-blue-600">{results.offsetMinutes}M</p>
                                                <p className="text-xs text-gray-500 mt-1">
                                                    Last 2 digits of address mod 15
                                                </p>
                                            </div>
                                            <div className="bg-white rounded p-3">
                                                <p className="font-medium text-gray-700">Period Seconds</p>
                                                <p className="text-2xl font-bold text-blue-600">{results.offsetSeconds}S</p>
                                                <p className="text-xs text-gray-500 mt-1">
                                                    (Last 2 digits of set mod 55) + 5
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {(!dnp3Address || !dnp3Set) && (
                                <div className="bg-gray-50 border-2 border-gray-200 rounded-lg p-6 text-center">
                                    <p className="text-gray-600">
                                        Enter both DNP3 Address and Set to calculate offsets
                                    </p>
                                </div>
                            )}

                            {dnp3Address && dnp3Set && (!isValidAddress || !isValidSet) && (
                                <div className="bg-red-50 border-2 border-red-200 rounded-lg p-4">
                                    <p className="text-red-700">
                                        Please check your inputs:
                                        {!isValidAddress && ' DNP3 Address must be exactly 5 digits.'}
                                        {!isValidSet && ' DNP3 Set must be 2 or 3 digits.'}
                                    </p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<DNP3Calculator />, document.getElementById('root'));
    </script>
</body>
</html>
```

## **To add to GitHub:**

1. Go to your repository (or create a new one called `dnp3-offset-calculator`)
2. Click **"Add file"** → **"Create new file"**
3. Name it `index.html`
4. Copy and paste ALL the code above
5. Click **"Commit new file"**
6. Go to **Settings → Pages**
7. Select **"main"** branch and click **Save**

Your app will be live at:
```
https://jnyyeah.github.io/dnp3-offset-calculator/
